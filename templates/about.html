<!DOCTYPE html>
<html lang="sv">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
  <title>Vasakronan - Solveig</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  <script type="module" src="{{ url_for('static', filename='searchAndModals.js') }}"></script>
</head>

<body>
  <header>
    <h1 id="headertext"><a href="/">Solveig</a></h1>
    <div id="headerbuttonsdiv">
      <button id="alertbutton" class="headerbutton">Skapa larm</button>
      <button id="nerdbutton" class="headerbutton">Om hemsidan</button>
    </div>
  </header>

  <div id="main_wrapper">
    <div id="nerdmodal">
      <div id="nerdmodalcont">
        <span class="close" id="nerdmodalclose"">&times;</span>
          <h1 class="header_txt">V√§lkommen till Solveig</h1>
          <p>Solveig √§r ett verktyg f√∂r att h√•lla koll p√• solcellproduktionen f√∂r att veta om det produceras s√• mycket
            som f√∂rv√§ntas f√∂r ett givet tidsintervall.
            Vi vet hur mycket som f√∂rv√§ntas produceras genom maskininl√§rning - allts√• att datorn l√§r sig m√∂nster p√•
            gammal data fr√•n solcellerna.
          </p>
          <h3>Varf√∂r √§r den data som presenteras lite gammal typ?</h3>
          <p><strong>V√§l observerat!</strong> Jo, det √§r n√§mligen s√• att
            den presenterade datan kommer fr√•n <a href="https://metry.io">Metry</a>. De rapporterar
            i nul√§get inte in data f√∂rr√§n <i>efter</i> m√•naden √§r slut. Allts√• kommer inte data f√∂r juni m√•nad vara
            tillg√§nglig
            f√∂rr√§n i b√∂rjan av juli osv.
          </p>
          <p>
            Det har gjort att jag har valt att man enbart f√•r tillg√•ng till data som √§r en m√•nad gammal fr√•n dagens
            datum - allts√• som nu n√§r jag skriver detta
            (21/6-22) s√• har jag tillg√•ng till data till och med 21 maj.
          </p>
          <h3>Hur l√§ser jag av hemsidan?</h3>
          <p>P√• den h√§r sidan s√• presenteras data f√∂r den energi som genererats av solceller som
            Vasakronan √§ger. Med dessa visas ocks√• uppskattade v√§rden som ber√§knats med hj√§lp av en
            maskininl√§rningsmodell
            som jag har snickrat ihop. Denna algoritm gissar (ganska bra ofta!!) hur mycket som b√∂r produceras av
            solcellerna
            f√∂r en viss dag och en viss plats. Denna kan sedan visas bredvid den faktiskt producerade elen fr√•n
            solcellerna.
            <br>
            Tanken √§r att man d√• f√•r en uppfattning om det √§r n√•got tokigt i solcellerna eller inte.
          </p>
          <h3>Jag har valt en anl√§ggning men ser ingen data - vad har h√§nt?</h3>
          <p>Vissa anl√§ggningar har ingen data mellan de valda datumen, alternativt har ingen data alls. Det g√∂r att jag
            inte kan visa n√•gon data - tyv√§rr.</p>
          <h3>Hur fungerar maskininl√§rningen? (F√∂r n√∂rdar ü§ì)</h3>
          <p>
            Denna hemsida fungerar genom att den valda stadens latitud och
            longitud anv√§nds f√∂r att f√• solinstr√•lningen till staden f√∂r en given
            dag. Solinstr√•lningen h√§mtas genom STR√ÖNG-APIet som tillhandah√•lls av
            SMHI.
            <br />
            Solinstr√•lningen skickas sedan till en maskininl√§rningsalgorithm - som
            har tr√§nat p√• massa m√§tdata fr√•n Vasakronans solceller i relation till
            solinstr√•lning - som g√∂r sitt b√§sta f√∂r att uppskatta elproduktionen
            f√∂r dagen i den valda staden.
            <br />
            Den algorim som nu anv√§nds f√∂r att f√∂rutsp√• effekten per timme och stad √§r ett s√• kallat neural network -
            algoritmen heter specifikt MLPRegressor. Medan algoritmen som anv√§nds f√∂r att f√∂rutsp√• den energi som skapas
            per dag och per anl√§ggning √§r en ensemble-modell som heter <i>RandomForestRegressor</i>.
            <br /><br />
            Ganska kul och ganska coolt. (eller?)
            <br /><br />
            Sj√§lva maskininl√§rningsmodellen √§r byggd i Python med Scikit-Learn och har sedan sparats via Pickle f√∂r att
            enkelt kunna √•teranv√§ndas.
            Backenden till denna hemsida anv√§nder Flask f√∂r att enkelt kunna koppla till maskininl√§rningsmodellerna.
            Vill du l√§sa mer om modellerna och kolla hur allt √§r byggt finns k√§llkoden p√• min <a href="https://github.com/NiklasVasa/FDD_Project">GitHub</a>.
          <h4>Hur bra √§r modellerna d√•?</h4>
          <p>Varje anl√§ggning har sin egna modell - f√∂r att det f√∂rutsp√•dda v√§rdet ska vara s√• bra som m√∂jligt. De b√§sta
            modellerna har en score p√• ungef√§r 0.75 (p√• en skala 0-1).
            Denna score specificeras som att den "Return the coefficient of determination of the prediction." av <a
              href="https://scikit-learn.org/stable/modules/generated/sklearn.neural_network.MLPRegressor.html">Scikit-Learn</a>
            utvecklarna.
            Kort och gott: H√∂gre score √§r b√§ttre! En score p√• 0 betyder att den varken √§r bra eller d√•lig.
          </p>
          </p>
          <h3>H√§r √§r en bild p√• Solveig (hon som r√§knar ut alla grejer allts√•)</h3>
          <img src="../static/cool-sol.jpeg">
      </div>
    </div>
    <div id="alertmodal">
      <div id="alertmodalcont">
        <span class="close" id="alertmodalclose"">&times;</span>
            <h1 class="header_txt">H√§r kan du skapa larm!</h1>
            <p>Tanken √§r att det ska skickas ett mail till dig om den solcellsanl√§ggning som du √§r intresserad av har en elproduktion som skiljer sig f√∂r mycket fr√•n den f√∂rutsp√•dda under fem konsekventa dagar.</p>
            <p>Fyll i formul√§ret nedan f√∂r att f√• larm n√§r n√•got inte st√•r r√§tt till med solcellen.</p>
            <form action="/signup" method="POST" name="alertform">
              <label for="email">Din E-post</label>
              <input name ="email" type="email" id="email"/>
              <label for="city">V√§lj stad:</label>
              <select name="city" id="ddlCityAlert">
                <option value="stockholm">Stockholm</option>
                <option value="uppsala">Uppsala</option>
                <option value="gothenburg">G√∂teborg</option>
                <option value="malmoe">Malm√∂</option>
              </select>
    
              <label for="meters_alert" id="meter_label_alert" class="meters_input""">V√§lj anl√§ggning:</label>
              <select name="meters_alert" id="meters_alert" class="meters_input" multiple></select>
    
              <input type="submit" value="V√§lj" id="submitalertbutton" />
              <p>E-posten skickas fr√•n addressen solveig.solcell@gmail.com - kolla skr√§pposten om du inte har f√•tt mailet! ‚òÄÔ∏è<br>
              Observera ocks√• att du kan g√∂ra flera alerts om du vill ha koll p√• m√§tare fr√•n olika st√§der.</p>
            </form>
          </div>
      </div>
      <div id="chart" class="chart"></div>
      <div id="chart2" class="chart"></div>
      <div id="chart3" class="chart"></div>
      <div id="formdiv">
        <!-- This form is for setting different dates to be displayed in the graph. -->
        <form action="/selected" method="GET" id="date_city_form">
          <label for="start">Fr√•n datum:</label>
          <input type="date" id="start" name="PV-start" value="{{frm}}" min="2018-01-01" max="{{to}}" />

          <label for="end">Till datum:</label>
          <input type="date" id="end" name="PV-end" value="{{to}}" min="2018-01-01" max="{{to}}" />

          <!-- This form is for selecting which cities PV to view. -->
          <label for="city">V√§lj stad:</label>
          <select name="city" id="ddlCity">
            <option value="all_cities">Alla st√§der</option>
            <option value="stockholm">Stockholm</option>
            <option value="uppsala">Uppsala</option>
            <option value="gothenburg">G√∂teborg</option>
            <option value="malmoe">Malm√∂</option>
          </select>

          <label for="meters" id="meter_label" class="meters_input""">V√§lj anl√§ggning:</label>
          <select name="meters" id="meters" class="meters_input" multiple></select>

          <input type="submit" value="V√§lj" id="submitbutton" />
        </form>
      </div>
      <div id="aboutheader">
        <h1>Om Solveig</h1>
      </div>
      <div id="abouttext">
        <p>
          Detta √§r ett verktyg som h√•ller koll p√• Vasakronans solceller genom
          maskininl√§rning. <br />
          I grafen visas en massa grejer. De linjer som bara heter st√§ders
          namn visar produktionen fr√•n en solcellsanl√§ggning i staden - medan de
          linjer som heter "Modell..." visar algoritmens ber√§knade v√§rde f√∂r en
          solcell i den staden.
        </p>
      </div>
    </div>
    <footer>
      <p>Utvecklad av <a href="https://www.linkedin.com/in/niklas-norinder-90805b16a/" id="name">Niklas Norinder</a> f√∂r
        Vasakronan 2022. </p>
      <p><a href="https://vasakronan.se">Vasakronans hemsida</a></p>
    </footer>
</body>

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script type="text/javascript">
  var graphs = {{ graphJSON | safe}};
  Plotly.plot('chart', graphs, {});
</script>
<script type="text/javascript">
  var graph2 = {{ graphJSON2 | safe}};
  Plotly.plot('chart2', graph2, {});
</script>
<script type="text/javascript">
  var graph3 = {{ graphJSON3 | safe}};
  Plotly.plot('chart3', graph3, {});
</script>

</html>